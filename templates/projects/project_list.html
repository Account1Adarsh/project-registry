{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Projects Registry</h1>
  <a href="{% url 'project_add' %}" class="btn btn-primary">
    <i class="fas fa-plus me-1"></i> Add Project
  </a>
</div>

<form method="get" class="row g-2 align-items-end mb-4">
  <!-- your search & filter controls from above -->
</form>

<div class="row g-4">
  {% for project in projects %}
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">{{ project.title }}</h5>
          <p class="card-text">
            {{ project.year }} &bull; {{ project.branch }} &bull; {{ project.get_project_type_display }}
          </p>
          {% if project.link %}
            <a href="{{ project.link }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>
          {% endif %}
          <a href="{% url 'project_detail' project.pk %}" class="btn btn-sm btn-outline-secondary">Details</a>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="text-center py-5">
      <p class="mb-3">No projects found yet.</p>
    </div>
  {% endfor %}
</div>

{% if is_paginated %}
  <nav class="mt-5">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a href="?{% if filter_q %}q={{ filter_q }}&amp;{% endif %}
                     {% if filter_year %}year={{ filter_year }}&amp;{% endif %}
                     {% if filter_branch %}branch={{ filter_branch }}&amp;{% endif %}
                     {% if filter_type %}type={{ filter_type }}&amp;{% endif %}
                     page={{ page_obj.previous_page_number }}"
             class="page-link">« Prev</a>
        </li>
      {% endif %}
      <li class="page-item disabled"><span class="page-link">{{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span></li>
      {% if page_obj.has_next %}
        <li class="page-item">
          <a href="?page={{ page_obj.next_page_number }}" class="page-link">Next »</a>
        </li>
      {% endif %}
    </ul>
  </nav>
{% endif %}
{% endblock %}
